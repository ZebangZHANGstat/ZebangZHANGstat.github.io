<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Examining Demographic Patterns in NYC Shooting Data</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="bootstrap.min.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="descriptive_statistics.html">Distribution</a>
</li>
<li>
  <a href="boro_nta.html">Distribution on the Map</a>
</li>
<li>
  <a href="https://zz3309.shinyapps.io/poverty_education/">Sociodemographic</a>
</li>
<li>
  <a href="https://zz3309.shinyapps.io/nyc_shooting_incident_shiny_dashboard/">Shiny App</a>
</li>
<li>
  <a href="Final_Report.html">Report</a>
</li>
<li>
  <a href="mailto:&lt;zz3309@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/ZebangZHANGstat/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Examining Demographic Patterns in NYC
Shooting Data</h1>

</div>


<p>Welcome!</p>
<pre class="r"><code>library(tidyverse)
library(plotly)</code></pre>
<pre class="r"><code>incidents_data &lt;- read.csv(&quot;data_final.csv&quot;)

incidents_filtered &lt;- incidents_data %&gt;%
  filter(Year &gt;= 2017 &amp; Year &lt;= 2023)

#Aggregate total incidents by CDTA
incidents_by_cdta &lt;- incidents_filtered %&gt;%
  group_by(CDTA) %&gt;%
  summarise(
    total_incidents = n(),
    Longitude = mean(Longitude, na.rm = TRUE),
    Latitude = mean(Latitude, na.rm = TRUE)
  ) %&gt;%
  ungroup()

# Define initial breaks from 0 to 400 with intervals of 5
initial_breaks &lt;- seq(0, 400, by = 5)

# Calculate the maximum number of incidents
max_incidents &lt;- max(incidents_by_cdta$total_incidents, na.rm = TRUE)

# Check if maximum incidents exceed 400 and adjust breaks and labels accordingly
if (max_incidents &gt; 400) {
  # Extend breaks to include all incidents &gt; 400
  extended_breaks &lt;- c(initial_breaks, Inf)
  
  # Create labels for all intervals, including the last one for incidents &gt;400
  labels &lt;- c(
    paste(initial_breaks[-length(initial_breaks)], initial_breaks[-1], sep = &quot;-&quot;),
    paste0(&quot;401-&quot;, max_incidents)
  )
} else {
  # No need to extend breaks
  extended_breaks &lt;- initial_breaks
  labels &lt;- paste(initial_breaks[-length(initial_breaks)], initial_breaks[-1], sep = &quot;-&quot;)
}

# Validate that the number of labels matches the number of intervals
num_intervals &lt;- length(extended_breaks) - 1
num_labels &lt;- length(labels)

if (num_intervals != num_labels) {
  stop(&quot;Number of labels does not match the number of intervals.&quot;)
}

# Assign incident ranges
incidents_by_cdta &lt;- incidents_by_cdta %&gt;%
  mutate(
    incident_range = cut(
      total_incidents,
      breaks = extended_breaks,
      include.lowest = TRUE,
      right = FALSE,  # Left-inclusive intervals [a, b)
      labels = labels
    )
  )

# Check for missing coordinates and exclude them
missing_coords &lt;- incidents_by_cdta %&gt;%
  filter(is.na(Longitude) | is.na(Latitude))

if (nrow(missing_coords) &gt; 0) {
  cat(&quot;Warning: The following CDTAs have missing coordinates and will be excluded from the plot:\n&quot;)
  print(missing_coords$CDTA)
  
  # Exclude CDTAs with missing coordinates
  incidents_by_cdta &lt;- incidents_by_cdta %&gt;%
    filter(!is.na(Longitude) &amp; !is.na(Latitude))
}

Sys.setenv(&#39;MAPBOX_TOKEN&#39; = &#39;pk.eyJ1IjoiZWR3YXJkenp6IiwiYSI6ImNtNDkwMzZ3YTA1MGIyanE1ZjdlNTZodjcifQ.BsLSffH3a0z5Xqf1Tqc4ag&#39;)  

# Create the scatter map
incident_map &lt;- plot_ly(
  data = incidents_by_cdta,
  type = &quot;scattermapbox&quot;,
  mode = &quot;markers&quot;,
  lon = ~Longitude,  
  lat = ~Latitude,   
  color = ~incident_range,
  colors = &quot;viridis&quot;,  
  marker = list(
    size = 8,
    opacity = 0.7
  ),
  text = ~paste(
    &quot;CDTA: &quot;, CDTA,
    &quot;&lt;br&gt;Total Incidents: &quot;, total_incidents,
    &quot;&lt;br&gt;Incident Range: &quot;, incident_range
  )
) %&gt;%
  layout(
    title = &quot;Total Number of Incidents Across NYC CDTAs (2017-2023)&quot;,
    mapbox = list(
      style = &quot;carto-positron&quot;,  # Choose desired map style
      center = list(lon = -73.95, lat = 40.74),  # Centered on NYC
      zoom = 9.5
    ),
    legend = list(title = list(text = &#39;Incident Range&#39;))
  )

incident_map</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-e5fa0c1399663075768b" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e5fa0c1399663075768b">{"x":{"visdat":{"379c4ca672e6":["function () ","plotlyVisDat"]},"cur_data":"379c4ca672e6","attrs":{"379c4ca672e6":{"mode":"markers","lon":{},"lat":{},"marker":{"size":8,"opacity":0.69999999999999996},"text":{},"color":{},"colors":"viridis","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scattermapbox"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Total Number of Incidents Across NYC CDTAs (2017-2023)","mapbox":{"style":"carto-positron","center":{"lon":-73.950000000000003,"lat":40.740000000000002},"zoom":9.5},"legend":{"title":{"text":"Incident Range"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"mode":"markers","lon":[-73.914664414000001,-73.870588003727875,-73.810069125333328,-73.962119814999994,-73.855294025999996,-73.760510779000001],"lat":[40.602622020000098,40.865762612336248,40.867667288333365,40.785564358999999,40.702603490999998,40.652261247000098],"marker":{"color":"rgba(68,1,84,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(68,1,84,1)"}},"text":["CDTA:  BK 56 <br>Total Incidents:  1 <br>Incident Range:  0-5","CDTA:  BX 27 <br>Total Incidents:  4 <br>Incident Range:  0-5","CDTA:  BX 28 <br>Total Incidents:  3 <br>Incident Range:  0-5","CDTA:  MN 64 <br>Total Incidents:  2 <br>Incident Range:  0-5","CDTA:  QN 82 <br>Total Incidents:  1 <br>Incident Range:  0-5","CDTA:  QN 83 <br>Total Incidents:  2 <br>Incident Range:  0-5"],"type":"scattermapbox","name":"0-5","textfont":{"color":"rgba(68,1,84,1)"},"line":{"color":"rgba(68,1,84,1)"},"frame":null},{"mode":"markers","lon":[-73.965142654666664,-74.00942433628569,-73.845626471857145,-73.765216365432352,-73.850633947999953],"lat":[40.655210222999997,40.708420726571497,40.724600801857157,40.755163492948,40.752928119000003],"marker":{"color":"rgba(69,5,89,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(69,5,89,1)"}},"text":["CDTA:  BK 55 <br>Total Incidents:  6 <br>Incident Range:  5-10","CDTA:  MN 01 <br>Total Incidents:  7 <br>Incident Range:  5-10","CDTA:  QN 06 <br>Total Incidents:  7 <br>Incident Range:  5-10","CDTA:  QN 11 <br>Total Incidents:  9 <br>Incident Range:  5-10","CDTA:  QN 81 <br>Total Incidents:  5 <br>Incident Range:  5-10"],"type":"scattermapbox","name":"5-10","textfont":{"color":"rgba(69,5,89,1)"},"line":{"color":"rgba(69,5,89,1)"},"frame":null},{"mode":"markers","lon":[-74.019884015356439,-73.883111079799988,-74.191790398249978],"lat":[40.626192807348765,40.892407267000031,40.540084494916691],"marker":{"color":"rgba(70,10,93,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(70,10,93,1)"}},"text":["CDTA:  BK 10 <br>Total Incidents:  14 <br>Incident Range:  10-15","CDTA:  BX 26 <br>Total Incidents:  10 <br>Incident Range:  10-15","CDTA:  SI 03 <br>Total Incidents:  12 <br>Incident Range:  10-15"],"type":"scattermapbox","name":"10-15","textfont":{"color":"rgba(70,10,93,1)"},"line":{"color":"rgba(70,10,93,1)"},"frame":null},{"mode":"markers","lon":[-73.988693452002423,-73.977690275138357],"lat":[40.639145073046521,40.744242907606235],"marker":{"color":"rgba(71,15,98,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(71,15,98,1)"}},"text":["CDTA:  BK 12 <br>Total Incidents:  18 <br>Incident Range:  15-20","CDTA:  MN 06 <br>Total Incidents:  17 <br>Incident Range:  15-20"],"type":"scattermapbox","name":"15-20","textfont":{"color":"rgba(71,15,98,1)"},"line":{"color":"rgba(71,15,98,1)"},"frame":null},{"mode":"markers","lon":[-73.991322063347809,-73.999485185999987,-73.952967171699981,-74.115887911636349],"lat":[40.607767773000035,40.727958018150012,40.77578150680003,40.590541020000053],"marker":{"color":"rgba(72,20,102,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(72,20,102,1)"}},"text":["CDTA:  BK 11 <br>Total Incidents:  23 <br>Incident Range:  20-25","CDTA:  MN 02 <br>Total Incidents:  20 <br>Incident Range:  20-25","CDTA:  MN 08 <br>Total Incidents:  20 <br>Incident Range:  20-25","CDTA:  SI 02 <br>Total Incidents:  22 <br>Incident Range:  20-25"],"type":"scattermapbox","name":"20-25","textfont":{"color":"rgba(72,20,102,1)"},"line":{"color":"rgba(72,20,102,1)"},"frame":null},{"mode":"markers","lon":[-73.985845944508341,-73.925283308131569,-73.897850568282308],"lat":[40.752309431746667,40.744980861315817,40.70951509249074],"marker":{"color":"rgba(72,32,114,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(72,32,114,1)"}},"text":["CDTA:  MN 05 <br>Total Incidents:  35 <br>Incident Range:  35-40","CDTA:  QN 02 <br>Total Incidents:  38 <br>Incident Range:  35-40","CDTA:  QN 05 <br>Total Incidents:  36 <br>Incident Range:  35-40"],"type":"scattermapbox","name":"35-40","textfont":{"color":"rgba(72,32,114,1)"},"line":{"color":"rgba(72,32,114,1)"},"frame":null},{"mode":"markers","lon":[-73.806839428454523],"lat":[40.724557568181844],"marker":{"color":"rgba(72,37,117,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(72,37,117,1)"}},"text":"CDTA:  QN 08 <br>Total Incidents:  44 <br>Incident Range:  40-45","type":"scattermapbox","name":"40-45","textfont":{"color":"rgba(72,37,117,1)"},"line":{"color":"rgba(72,37,117,1)"},"frame":null},{"mode":"markers","lon":[-74.008182931431435,-73.945396765311102],"lat":[40.647690836114542,40.595446874955584],"marker":{"color":"rgba(72,41,121,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(72,41,121,1)"}},"text":["CDTA:  BK 07 <br>Total Incidents:  48 <br>Incident Range:  45-50","CDTA:  BK 15 <br>Total Incidents:  46 <br>Incident Range:  45-50"],"type":"scattermapbox","name":"45-50","textfont":{"color":"rgba(72,41,121,1)"},"line":{"color":"rgba(72,41,121,1)"},"frame":null},{"mode":"markers","lon":[-73.827386108699983],"lat":[40.764246112940036],"marker":{"color":"rgba(71,45,123,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(71,45,123,1)"}},"text":"CDTA:  QN 07 <br>Total Incidents:  51 <br>Incident Range:  50-55","type":"scattermapbox","name":"50-55","textfont":{"color":"rgba(71,45,123,1)"},"line":{"color":"rgba(71,45,123,1)"},"frame":null},{"mode":"markers","lon":[-73.904071881103661,-73.996356733648398],"lat":[40.877429763751358,40.753851172840236],"marker":{"color":"rgba(70,48,126,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(70,48,126,1)"}},"text":["CDTA:  BX 08 <br>Total Incidents:  55 <br>Incident Range:  55-60","CDTA:  MN 04 <br>Total Incidents:  58 <br>Incident Range:  55-60"],"type":"scattermapbox","name":"55-60","textfont":{"color":"rgba(70,48,126,1)"},"line":{"color":"rgba(70,48,126,1)"},"frame":null},{"mode":"markers","lon":[-73.87066662763614],"lat":[40.743685966166858],"marker":{"color":"rgba(70,52,128,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(70,52,128,1)"}},"text":"CDTA:  QN 04 <br>Total Incidents:  64 <br>Incident Range:  60-65","type":"scattermapbox","name":"60-65","textfont":{"color":"rgba(70,52,128,1)"},"line":{"color":"rgba(70,52,128,1)"},"frame":null},{"mode":"markers","lon":[-73.972602614722177],"lat":[40.789408593163195],"marker":{"color":"rgba(69,56,130,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(69,56,130,1)"}},"text":"CDTA:  MN 07 <br>Total Incidents:  66 <br>Incident Range:  65-70","type":"scattermapbox","name":"65-70","textfont":{"color":"rgba(69,56,130,1)"},"line":{"color":"rgba(69,56,130,1)"},"frame":null},{"mode":"markers","lon":[-73.830822274178061,-73.871234069499991],"lat":[40.846734094671284,40.755579470263925],"marker":{"color":"rgba(67,60,132,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(67,60,132,1)"}},"text":["CDTA:  BX 10 <br>Total Incidents:  73 <br>Incident Range:  70-75","CDTA:  QN 03 <br>Total Incidents:  72 <br>Incident Range:  70-75"],"type":"scattermapbox","name":"70-75","textfont":{"color":"rgba(67,60,132,1)"},"line":{"color":"rgba(67,60,132,1)"},"frame":null},{"mode":"markers","lon":[-73.995431485477255,-73.822295374009698],"lat":[40.678680786295487,40.677954018888336],"marker":{"color":"rgba(63,71,136,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(63,71,136,1)"}},"text":["CDTA:  BK 06 <br>Total Incidents:  88 <br>Incident Range:  85-90","CDTA:  QN 10 <br>Total Incidents:  87 <br>Incident Range:  85-90"],"type":"scattermapbox","name":"85-90","textfont":{"color":"rgba(63,71,136,1)"},"line":{"color":"rgba(63,71,136,1)"},"frame":null},{"mode":"markers","lon":[-73.833482740801813],"lat":[40.695035925809847],"marker":{"color":"rgba(62,75,137,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(62,75,137,1)"}},"text":"CDTA:  QN 09 <br>Total Incidents:  94 <br>Incident Range:  90-95","type":"scattermapbox","name":"90-95","textfont":{"color":"rgba(62,75,137,1)"},"line":{"color":"rgba(62,75,137,1)"},"frame":null},{"mode":"markers","lon":[-73.985303242723901],"lat":[40.718932326977438],"marker":{"color":"rgba(56,89,140,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(56,89,140,1)"}},"text":"CDTA:  MN 03 <br>Total Incidents:  110 <br>Incident Range:  110-115","type":"scattermapbox","name":"110-115","textfont":{"color":"rgba(56,89,140,1)"},"line":{"color":"rgba(56,89,140,1)"},"frame":null},{"mode":"markers","lon":[-73.991037136157715],"lat":[40.577683539907106],"marker":{"color":"rgba(54,92,141,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(54,92,141,1)"}},"text":"CDTA:  BK 13 <br>Total Incidents:  116 <br>Incident Range:  115-120","type":"scattermapbox","name":"115-120","textfont":{"color":"rgba(54,92,141,1)"},"line":{"color":"rgba(54,92,141,1)"},"frame":null},{"mode":"markers","lon":[-73.952052831536562],"lat":[40.820394545406543],"marker":{"color":"rgba(53,96,141,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(53,96,141,1)"}},"text":"CDTA:  MN 09 <br>Total Incidents:  124 <br>Incident Range:  120-125","type":"scattermapbox","name":"120-125","textfont":{"color":"rgba(53,96,141,1)"},"line":{"color":"rgba(53,96,141,1)"},"frame":null},{"mode":"markers","lon":[-73.978280043879181],"lat":[40.69432743135394],"marker":{"color":"rgba(49,102,142,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(49,102,142,1)"}},"text":"CDTA:  BK 02 <br>Total Incidents:  133 <br>Incident Range:  130-135","type":"scattermapbox","name":"130-135","textfont":{"color":"rgba(49,102,142,1)"},"line":{"color":"rgba(49,102,142,1)"},"frame":null},{"mode":"markers","lon":[-73.946129764649399,-73.958197551955863],"lat":[40.710895229505745,40.642728925154458],"marker":{"color":"rgba(48,105,142,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(48,105,142,1)"}},"text":["CDTA:  BK 01 <br>Total Incidents:  139 <br>Incident Range:  135-140","CDTA:  BK 14 <br>Total Incidents:  136 <br>Incident Range:  135-140"],"type":"scattermapbox","name":"135-140","textfont":{"color":"rgba(48,105,142,1)"},"line":{"color":"rgba(48,105,142,1)"},"frame":null},{"mode":"markers","lon":[-73.917712077830785,-73.85929126337804],"lat":[40.695099100212438,40.863184132997169],"marker":{"color":"rgba(47,108,142,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(47,108,142,1)"}},"text":["CDTA:  BK 04 <br>Total Incidents:  140 <br>Incident Range:  140-145","CDTA:  BX 11 <br>Total Incidents:  140 <br>Incident Range:  140-145"],"type":"scattermapbox","name":"140-145","textfont":{"color":"rgba(47,108,142,1)"},"line":{"color":"rgba(47,108,142,1)"},"frame":null},{"mode":"markers","lon":[-73.948378532103689],"lat":[40.663904420459886],"marker":{"color":"rgba(42,120,142,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(42,120,142,1)"}},"text":"CDTA:  BK 09 <br>Total Incidents:  164 <br>Incident Range:  160-165","type":"scattermapbox","name":"160-165","textfont":{"color":"rgba(42,120,142,1)"},"line":{"color":"rgba(42,120,142,1)"},"frame":null},{"mode":"markers","lon":[-73.928865776465543,-73.745446771040903],"lat":[40.76256844833437,40.683033936198868],"marker":{"color":"rgba(39,126,142,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(39,126,142,1)"}},"text":["CDTA:  QN 01 <br>Total Incidents:  170 <br>Incident Range:  170-175","CDTA:  QN 13 <br>Total Incidents:  171 <br>Incident Range:  170-175"],"type":"scattermapbox","name":"170-175","textfont":{"color":"rgba(39,126,142,1)"},"line":{"color":"rgba(39,126,142,1)"},"frame":null},{"mode":"markers","lon":[-73.893970860338612],"lat":[40.819407961687865],"marker":{"color":"rgba(35,138,141,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(35,138,141,1)"}},"text":"CDTA:  BX 02 <br>Total Incidents:  190 <br>Incident Range:  190-195","type":"scattermapbox","name":"190-195","textfont":{"color":"rgba(35,138,141,1)"},"line":{"color":"rgba(35,138,141,1)"},"frame":null},{"mode":"markers","lon":[-73.891898137620032],"lat":[40.868501218763342],"marker":{"color":"rgba(34,141,141,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(34,141,141,1)"}},"text":"CDTA:  BX 07 <br>Total Incidents:  197 <br>Incident Range:  195-200","type":"scattermapbox","name":"195-200","textfont":{"color":"rgba(34,141,141,1)"},"line":{"color":"rgba(34,141,141,1)"},"frame":null},{"mode":"markers","lon":[-73.7747445735761,-74.108021418021679],"lat":[40.597237917750007,40.629928660872714],"marker":{"color":"rgba(30,156,137,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(30,156,137,1)"}},"text":["CDTA:  QN 14 <br>Total Incidents:  220 <br>Incident Range:  220-225","CDTA:  SI 01 <br>Total Incidents:  224 <br>Incident Range:  220-225"],"type":"scattermapbox","name":"220-225","textfont":{"color":"rgba(30,156,137,1)"},"line":{"color":"rgba(30,156,137,1)"},"frame":null},{"mode":"markers","lon":[-73.90940303762855,-73.865522079857953],"lat":[40.635711202380719,40.826186648863036],"marker":{"color":"rgba(39,173,129,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(39,173,129,1)"}},"text":["CDTA:  BK 18 <br>Total Incidents:  250 <br>Incident Range:  250-255","CDTA:  BX 09 <br>Total Incidents:  252 <br>Incident Range:  250-255"],"type":"scattermapbox","name":"250-255","textfont":{"color":"rgba(39,173,129,1)"},"line":{"color":"rgba(39,173,129,1)"},"frame":null},{"mode":"markers","lon":[-73.939039165260624],"lat":[40.673376166379711],"marker":{"color":"rgba(47,180,124,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(47,180,124,1)"}},"text":"CDTA:  BK 08 <br>Total Incidents:  264 <br>Incident Range:  260-265","type":"scattermapbox","name":"260-265","textfont":{"color":"rgba(47,180,124,1)"},"line":{"color":"rgba(47,180,124,1)"},"frame":null},{"mode":"markers","lon":[-73.929617883726735],"lat":[40.854331008199381],"marker":{"color":"rgba(52,182,121,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(52,182,121,1)"}},"text":"CDTA:  MN 12 <br>Total Incidents:  265 <br>Incident Range:  265-270","type":"scattermapbox","name":"265-270","textfont":{"color":"rgba(52,182,121,1)"},"line":{"color":"rgba(52,182,121,1)"},"frame":null},{"mode":"markers","lon":[-73.887129684610358],"lat":[40.848440947916622],"marker":{"color":"rgba(122,209,81,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(122,209,81,1)"}},"text":"CDTA:  BX 06 <br>Total Incidents:  324 <br>Incident Range:  320-325","type":"scattermapbox","name":"320-325","textfont":{"color":"rgba(122,209,81,1)"},"line":{"color":"rgba(122,209,81,1)"},"frame":null},{"mode":"markers","lon":[-73.899699764969441],"lat":[40.832495362178143],"marker":{"color":"rgba(130,211,77,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(130,211,77,1)"}},"text":"CDTA:  BX 03 <br>Total Incidents:  327 <br>Incident Range:  325-330","type":"scattermapbox","name":"325-330","textfont":{"color":"rgba(130,211,77,1)"},"line":{"color":"rgba(130,211,77,1)"},"frame":null},{"mode":"markers","lon":[-73.916431790736326,-73.853930201402179],"lat":[40.813652228075156,40.886679143363764],"marker":{"color":"rgba(179,221,44,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(179,221,44,1)"}},"text":["CDTA:  BX 01 <br>Total Incidents:  359 <br>Incident Range:  355-360","CDTA:  BX 12 <br>Total Incidents:  357 <br>Incident Range:  355-360"],"type":"scattermapbox","name":"355-360","textfont":{"color":"rgba(179,221,44,1)"},"line":{"color":"rgba(179,221,44,1)"},"frame":null},{"mode":"markers","lon":[-73.906301838067137],"lat":[40.853150230031254],"marker":{"color":"rgba(196,224,34,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(196,224,34,1)"}},"text":"CDTA:  BX 05 <br>Total Incidents:  366 <br>Incident Range:  365-370","type":"scattermapbox","name":"365-370","textfont":{"color":"rgba(196,224,34,1)"},"line":{"color":"rgba(196,224,34,1)"},"frame":null},{"mode":"markers","lon":[-73.941173375951934],"lat":[40.797244216705074],"marker":{"color":"rgba(213,226,26,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(213,226,26,1)"}},"text":"CDTA:  MN 11 <br>Total Incidents:  376 <br>Incident Range:  375-380","type":"scattermapbox","name":"375-380","textfont":{"color":"rgba(213,226,26,1)"},"line":{"color":"rgba(213,226,26,1)"},"frame":null},{"mode":"markers","lon":[-73.944930768746005],"lat":[40.813233974832563],"marker":{"color":"rgba(222,227,24,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(222,227,24,1)"}},"text":"CDTA:  MN 10 <br>Total Incidents:  383 <br>Incident Range:  380-385","type":"scattermapbox","name":"380-385","textfont":{"color":"rgba(222,227,24,1)"},"line":{"color":"rgba(222,227,24,1)"},"frame":null},{"mode":"markers","lon":[-73.933610878846011],"lat":[40.650743216581326],"marker":{"color":"rgba(230,228,25,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(230,228,25,1)"}},"text":"CDTA:  BK 17 <br>Total Incidents:  386 <br>Incident Range:  385-390","type":"scattermapbox","name":"385-390","textfont":{"color":"rgba(230,228,25,1)"},"line":{"color":"rgba(230,228,25,1)"},"frame":null},{"mode":"markers","lon":[-73.939994156377196,-73.882937103323187,-73.910489426696643,-73.917476970131091,-73.780793417454461],"lat":[40.687916471414709,40.668659709429598,40.667297197619206,40.835119692056871,40.692218145145048],"marker":{"color":"rgba(253,231,37,1)","size":8,"opacity":0.69999999999999996,"line":{"color":"rgba(253,231,37,1)"}},"text":["CDTA:  BK 03 <br>Total Incidents:  530 <br>Incident Range:  401-551","CDTA:  BK 05 <br>Total Incidents:  551 <br>Incident Range:  401-551","CDTA:  BK 16 <br>Total Incidents:  470 <br>Incident Range:  401-551","CDTA:  BX 04 <br>Total Incidents:  409 <br>Incident Range:  401-551","CDTA:  QN 12 <br>Total Incidents:  419 <br>Incident Range:  401-551"],"type":"scattermapbox","name":"401-551","textfont":{"color":"rgba(253,231,37,1)"},"line":{"color":"rgba(253,231,37,1)"},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
